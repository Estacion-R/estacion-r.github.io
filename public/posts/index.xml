<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on Estaci√≥n üá∑</title>
        <link>https://estacion-r.netlify.app/posts/</link>
        <description>Recent content in Posts on Estaci√≥n üá∑</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>es-AR</language>
        <lastBuildDate>Sun, 14 Aug 2022 00:00:00 +0000</lastBuildDate>
        <atom:link href="https://estacion-r.netlify.app/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Todos los caminos conducen a Microcentro</title>
            <link>https://estacion-r.netlify.app/posts/2022/08/todos-los-caminos-conducen-a-microcentro/</link>
            <pubDate>Sun, 14 Aug 2022 00:00:00 +0000</pubDate>
            
            <guid>https://estacion-r.netlify.app/posts/2022/08/todos-los-caminos-conducen-a-microcentro/</guid>
            <description>IdeaAnalizar la concentraci√≥n de la infraestructura de la administraci√≥n p√∫blica. La hip√≥tesis por detr√°s de este informe exploratorio asume la presencia de una alta concentraci√≥n de innmuebles en ciertas zonas, principalmente en aquella denominada ‚ÄúMicrocentro‚Äù, hecho que genera una gran movilizaci√≥n de personas hacia mismos lugares con una consecuente saturaci√≥n del sistema de transporte, por un lado y de servicios, por otro.
Por otro lado, este hecho, dado el contexto actual en donde la aglomeraci√≥n de personas no es aconsejable a la hora de combatir enfermedades producidas por virus como el COVID, potencia las consecuencias negativas de dicha distribuci√≥n geogr√°fica de los inmuebles estatales y refuerza la necesidad de impulsar una pol√≠tica p√∫blica que apunte a la desconcentraci√≥n.</description>
            <content type="html"><![CDATA[


<div id="idea" class="section level2">
<h2>Idea</h2>
<p>Analizar la concentraci√≥n de la infraestructura de la administraci√≥n p√∫blica. La hip√≥tesis por detr√°s de este informe exploratorio asume la presencia de una alta concentraci√≥n de innmuebles en ciertas zonas, principalmente en aquella denominada ‚ÄúMicrocentro‚Äù, hecho que genera una gran movilizaci√≥n de personas hacia mismos lugares con una consecuente saturaci√≥n del sistema de transporte, por un lado y de servicios, por otro.</p>
<p>Por otro lado, este hecho, dado el contexto actual en donde la aglomeraci√≥n de personas no es aconsejable a la hora de combatir enfermedades producidas por virus como el COVID, potencia las consecuencias negativas de dicha distribuci√≥n geogr√°fica de los inmuebles estatales y refuerza la necesidad de impulsar una pol√≠tica p√∫blica que apunte a la desconcentraci√≥n.</p>
<p>Finalmente, se deja como posibilidad el avanzar en una estimaci√≥n sobre la cantidad de personas que se movilizan hacia esos edificios, posiblemente, en funci√≥n de la superficie de los inmuebles.</p>
</div>
<div id="ubicaci√≥n." class="section level2">
<h2>Ubicaci√≥n.</h2>
<p>El an√°lisis se centra en la ubicaci√≥n de los inmuebles del Estado Nacional en la Ciudad de Aut√≥noma de Buenos Aires, dada la relevancia administrativa que presenta la jurisdicci√≥n para el pa√≠s. Esto no impide que el an√°lisis se pueda extender a otras localidades, siempre que la informaci√≥n lo permita.</p>
</div>
<div id="fuentes-de-datos." class="section level2">
<h2>Fuentes de datos.</h2>
<ul>
<li><p><a href="https://datos.gob.ar/dataset/otros-inmuebles-propios-estado-nacional-alquilados">Inmuebles Propios del Estado Nacional y Alquilados.</a></p></li>
<li><p><a href="https://data.buenosaires.gob.ar/dataset/edificios-publicos">Edificios P√∫blicos del Gobierno de la Ciudad de Buenos Aires</a></p>
<ul>
<li><p>A Futuro:</p>
<ul>
<li><p><a href="https://datos.gob.ar/dataset/jgm-nomina-personal-civil-administracion-publica-nacional-apn">N√≥mina del personal civil de la Administraci√≥n P√∫blica Nacional (APN)</a></p></li>
<li><p>Buscar: N√≥mina de la administraci√≥n P√∫blica del Gobierno de la Ciudad de Buenos Aires</p></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="urgando-en-la-informaci√≥n-disponible" class="section level2">
<h2>Urgando en la informaci√≥n disponible</h2>
<p>La informaciu√≥n con la que se cuenta es aquella referida a los Inmuebles Propios del Estado Nacional y Alquilados, provista por la Direcci√≥n Nacional del Registro de Bienes Inmuebles - Agencia de Administraci√≥n de Bienes del Estado - Jefatura de Gabinete de Ministros.</p>
<pre><code>## spec_tbl_df [677 √ó 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ codigo_del_inmueble     : num [1:677] 200002040 200002059 200002067 200002075 200002083 ...
##  $ organizacion            : chr [1:677] &quot;AFIP ADMINISTRACI√ìN FEDERAL DE INGRESOS P√öBLICOS&quot; &quot;AFIP ADMINISTRACI√ìN FEDERAL DE INGRESOS P√öBLICOS&quot; &quot;AFIP ADMINISTRACI√ìN FEDERAL DE INGRESOS P√öBLICOS&quot; &quot;AFIP ADMINISTRACI√ìN FEDERAL DE INGRESOS P√öBLICOS&quot; ...
##  $ pais                    : chr [1:677] &quot;Argentina&quot; &quot;Argentina&quot; &quot;Argentina&quot; &quot;Argentina&quot; ...
##  $ provincia               : chr [1:677] &quot;Ciudad Autonoma de Buenos Aires&quot; &quot;Ciudad Autonoma de Buenos Aires&quot; &quot;Ciudad Autonoma de Buenos Aires&quot; &quot;Ciudad Autonoma de Buenos Aires&quot; ...
##  $ departamento            : chr [1:677] &quot;Comuna 1&quot; &quot;Comuna 1&quot; &quot;Comuna 1&quot; &quot;Comuna 3&quot; ...
##  $ localidad               : chr [1:677] NA NA NA NA ...
##  $ calle                   : chr [1:677] &quot;Avenida Rivadavia&quot; &quot;Avenida de Mayo&quot; &quot;Avenida Paseo Colon&quot; &quot;Hipolito Yrigoyen&quot; ...
##  $ numero                  : chr [1:677] &quot;1355&quot; &quot;1317&quot; &quot;635&quot; &quot;2221/51&quot; ...
##  $ situacion_inmueble      : chr [1:677] &quot;Propiedad del ENA&quot; &quot;Propiedad del ENA&quot; &quot;Propiedad del ENA&quot; &quot;Propiedad del ENA&quot; ...
##  $ superficie_aproximada_m2: num [1:677] 946 1361 2740 1461 1138 ...
##  $ longitud                : num [1:677] -58.4 -58.4 -58.4 -58.4 -58.4 ...
##  $ latitud                 : num [1:677] -34.6 -34.6 -34.6 -34.6 -34.6 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   codigo_del_inmueble = col_double(),
##   ..   organizacion = col_character(),
##   ..   pais = col_character(),
##   ..   provincia = col_character(),
##   ..   departamento = col_character(),
##   ..   localidad = col_character(),
##   ..   calle = col_character(),
##   ..   numero = col_character(),
##   ..   situacion_inmueble = col_character(),
##   ..   superficie_aproximada_m2 = col_double(),
##   ..   longitud = col_double(),
##   ..   latitud = col_double()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<p>Una de las primeras observaciones alude a la presencia de varios campos que indican que la informaci√≥n que contiene la base es para absolutamente todos los edificios en manos del Estado Nacional Argentino (propios o en alquiler), sea que est√©n ubicados dentro o fuera del pa√≠s y, en el primer caso, en qu√© jurisdicci√≥n.</p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Para este an√°lisis, vamos a quedarnos unicamente con aquellos localizados en Argentina y, a su vez, en la Ciudad Aut√≥noma de Buenos Aires (CABA). Notamos c√≥mo en la Ciudad Aut√≥noma de Buenos Aires, centro adminitrativo del pa√≠s, se concetra practicamente la totalidad de los inmuebles <strong>(97,5%)</strong></p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Tal como se mencion√≥ anteriormente, el an√°lisis se centra en la distribuci√≥n de inmuebles ubicados en la CABA. Una vez seleccionado nuestro universo de an√°lisis, se procede a localizar geogr√°ficamente sobre un mapa la ubicaci√≥n de cada uno de los edificios:</p>
<pre><code>## Reading layer `CABA_comunas&#39; from data source 
##   `https://bitsandbricks.github.io/data/CABA_comunas.geojson&#39; 
##   using driver `GeoJSON&#39;
## Simple feature collection with 15 features and 4 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -58.53152 ymin: -34.70529 xmax: -58.33514 ymax: -34.52754
## Geodetic CRS:  WGS 84</code></pre>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Podemos notar que ciertos puntos presentan un color intenso. Esto nos permite sospechar que una misma direcci√≥n aparece varias veces en la base de datos. Tratemos de quedarnos con una s√≥la fila por direcci√≥n, intentando no perder informaci√≥n en el camino, como la superficie en mts2 del edificio (posible estimador de cantidad de personas por edificio a utilizar en un futuro):</p>
<p>Para ello, se crea una variable que contenga la informaci√≥n de la calle y el n√∫mero en un mismo campo, y as√≠ poder identificar si se encuentra duplicada la fila.</p>
<p>Encontramos, efectivamente, que hay 247 direcciones duplicadas y 207 coordenadas duplicadas. Esto se debe, principalmente, a que en aquellos edificios donde el Estado dispone de m√°s de un piso, se registra cada uno como un caso diferente.</p>
<p>Al mismo tiempo, evidenciamos que el campo de superficie se encuentra de forma agregada por edificio y no por piso:</p>
<pre><code>## # A tibble: 259 √ó 8
##    codigo_del_inmueble calle_n‚Ä¶¬π depar‚Ä¶¬≤ super‚Ä¶¬≥ longi‚Ä¶‚Å¥ latitud dupli‚Ä¶‚Åµ dupli‚Ä¶‚Å∂
##                  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1           200000196 Esmerald‚Ä¶ Comuna‚Ä¶   1082.   -58.4   -34.6       2       1
##  2           200000390 Avenida ‚Ä¶ Comuna‚Ä¶   1092.   -58.4   -34.6       2       1
##  3           200000463 25 de Ma‚Ä¶ Comuna‚Ä¶    382.   -58.4   -34.6       1       1
##  4           200000471 25 de Ma‚Ä¶ Comuna‚Ä¶    382.   -58.4   -34.6       1       1
##  5           200000481 25 de Ma‚Ä¶ Comuna‚Ä¶    382.   -58.4   -34.6       1       1
##  6           200000498 25 de Ma‚Ä¶ Comuna‚Ä¶    382.   -58.4   -34.6       1       1
##  7           200000617 25 de Ma‚Ä¶ Comuna‚Ä¶    299.   -58.4   -34.6       1       1
##  8           200000625 25 de Ma‚Ä¶ Comuna‚Ä¶    299.   -58.4   -34.6       1       1
##  9           200000749 Av. 9 de‚Ä¶ Comuna‚Ä¶   1750.   -58.4   -34.6       2       1
## 10           200001192 Av. Corr‚Ä¶ Comuna‚Ä¶    337.   -58.4   -34.6       1       1
## # ‚Ä¶ with 249 more rows, and abbreviated variable names ¬π‚Äãcalle_numero,
## #   ¬≤‚Äãdepartamento, ¬≥‚Äãsuperficie_aproximada_m2, ‚Å¥‚Äãlongitud, ‚Åµ‚Äãduplicados_dir,
## #   ‚Å∂‚Äãduplicados_coord</code></pre>
<p>Procedemos entonces a eliminar los edificios duplicados para evitar el doble conteo. Su peso por superficie, en caso de considerarlo, seguir√° siendo posible de analizar.</p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>A continuaci√≥n se puede ver c√≥mo se distribuyen los edificios seg√∫n la comuna en donde est√©n ubicados y notar que tenemos casos donde no se dispone de informaci√≥n sobre a cu√°l de ellas pertenecen:</p>
<pre><code>##       Comuna Cantidad
## 1   Comuna 1      178
## 2  Comuna 14       32
## 3   Comuna 2       29
## 4   Comuna 3       17
## 5   Comuna 4       15
## 6  Comuna 13       12
## 7   Comuna 7        9
## 8  Comuna 15        8
## 9   Comuna 6        8
## 10  Comuna 5        7
## 11 Comuna 12        6
## 12  Comuna 9        5
## 13 Comuna 11        4
## 14 Comuna 10        3
## 15  Comuna 8        2</code></pre>
<p>Una vez descartados los casos sin informaci√≥n, se nota claramente la concentraci√≥n de inmuebles del Estado Nacional en la <strong>Comuna 1</strong>, con m√°s de la mitad de los inmuebles <strong>(52.7)</strong> y muy lejos de la <strong>Comuna 14</strong>, en segundo lugar, quien concentra un <strong>9.6</strong> de los mismos.</p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Intenemos armar un mapa de coropletas:</p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>En el mapa se puede identificar claramente la concentraci√≥n extrema de oficinas del Estado Nacional en la comuna 1.</p>
<p>Podr√≠amos precisar en una escala menor esta distribuci√≥n, por ejemplo, por radios censales:</p>
<pre><code>## Reading layer `CABA_rc&#39; from data source 
##   `https://bitsandbricks.github.io/data/CABA_rc.geojson&#39; using driver `GeoJSON&#39;
## Simple feature collection with 3554 features and 8 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -58.53092 ymin: -34.70574 xmax: -58.33455 ymax: -34.528
## Geodetic CRS:  WGS 84</code></pre>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Otra forma de visualizar la informaci√≥n es a trav√©s de los gr√°ficos de densidad. En este caso, se puede identificar una clara zona predominante (como vimos, principalmente en la Comuna 1) y peque√±as zonas poco densas en cuanto a la cantidad de edificios del Estado.</p>
<pre><code>##      left    bottom     right       top 
## -58.53800 -34.68466 -58.33475 -34.52943</code></pre>
<p><img src="/posts/2022-08-14-caminos-microcentro/2022-08-14-caminos-microcentro_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>(Breve) Conclusi√≥n.</p>
<p>Desde el punto de vista de la movilidad de personas al trabajo, comprobamos que (casi) todes vamos para el mismo lado, o dicho de otra forma, que m√°s de la mitad de los inmuebles del Estado se ubican en una s√≥la Comuna lo que, inevitablemente, genera un flujo de personas hacia la misma direcci√≥n. Esto, por un lado, conlleva consecuencias negativas importantes tanto para la calidad como para la capacidad de servicio del transporte p√∫blico (y que, a su vez, afecta a la calidad de vida de las personas).</p>
<p>Por otro lado, una mejor redistribuci√≥n de los inmuebles podr√≠a generar una mejor distribuci√≥n de los recursos econ√≥micos que se movilizan para ofrecer servicios a las personas que deben movilizarse hacia esos destinos para trabajar. Y no s√≥lo nos referimos a servicios desde una perspectiva comercial. La redistribuci√≥n podr√≠a facilitar el acceso a la seguridad y a la salud de la poblaci√≥n del resto de las comunas, por ejemplo.</p>
<p>Se podr√≠a decir, en su momento, que una distribuci√≥n espacial como la actual estaba fundamentada en la ventaja que proporcionaba el hecho de estar cerca, fisicamente, del centro administrativo del pa√≠s. Hoy ese motivo puede ser relativizado, cuando muchas de las razones para acercarse ya no siguen vigente (tramites online, operatorias administrativas, bancarias, entre otras, en su gran proporci√≥n hoy digitales).
¬øC√≥mo sigue?</p>
<p>Queda a futuro poder avanzar sobre una estimaci√≥n de la cantidad de personas que se movilizan hacia estos inmuebles concentrados geograficamente que posee el Estado Nacional, sumando informaci√≥n sobre la pertinencia de permanecer en dicha zona y la posibilidad de implementar una pol√≠tica p√∫blica de relocalizaci√≥n.</p>
<p>Tambi√©n queda para seguir sumando la distribuci√≥n de los inmuebles propios o alguilados que le corresponden a la Ciudad Aut√≥noma de Buenos Aires.</p>
<p><br></p>
<hr />
</div>
<div id="el-c√≥digo." class="section level2">
<h2>El C√≥digo.</h2>
<pre class="r"><code># Librer√≠as
library(tidyverse)
#devtools::install_github(&quot;holatam/eph&quot;)
library(eph)
library(sf)
library(ggmap)
library(hrbrthemes)
#remotes::install_github(&quot;ewenme/ghibli&quot;)
library(ghibli)
library(kableExtra)
library(DataExplorer)
library(skimr)

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
##                               Carga de datos                             ----
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
b_inmuebles_apn &lt;- read_csv(&quot;https://infra.datos.gob.ar/catalog/otros/dataset/6/distribution/6.1/download/inmuebles-estado-nacional.csv&quot;)


skim(b_inmuebles_apn)

calculate_tabulates(b_inmuebles_apn, &quot;pais&quot;) %&gt;% 
  arrange(-Freq) %&gt;% 
  ggplot(aes(x = reorder(pais, Freq), y = Freq)) +
  geom_col(fill = &quot;forestgreen&quot;, alpha = 0.5, colour = &quot;black&quot;) +
  geom_hline(yintercept = 0) + 
  geom_text(aes(label = Freq), hjust = -0.2, size = 3) +
  labs(title = &quot;Cantidad de inmuebles del Estado Nacional Argentino por pa√≠s&quot;,
       caption= &quot;Fuente: https://datos.gob.ar/&quot;,
       fill = &quot;&quot;, x = &quot;Pa√≠s&quot;, y = &quot;Cantidad&quot;) +
  coord_flip() +
  theme_minimal() +
  theme(plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
                     plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
                     title=element_text(size=10, face = &quot;bold&quot;))

b_inmuebles_apn %&gt;% 
  filter(pais == &quot;Argentina&quot;) %&gt;% 
  calculate_tabulates( &quot;provincia&quot;, add.percentage = &quot;col&quot;) %&gt;% 
  mutate(Freq = as.numeric(Freq)) %&gt;% 
  arrange(-Freq) %&gt;% 
  ggplot(aes(x = reorder(provincia, Freq), y = Freq)) +
  geom_col(fill = &quot;forestgreen&quot;, alpha = 0.5, colour = &quot;black&quot;) +
  geom_hline(yintercept = 0) + 
  geom_text(aes(label = paste0(Freq, &quot;%&quot;), y = Freq + 0.5), hjust = -0.1, size = 3) +
  labs(title = &quot;Distribuci√≥n porcentual de los inmuebles del Estado \n Nacional Argentino por provincia&quot;,
       caption= &quot;Fuente: https://datos.gob.ar/&quot;,
       fill = &quot;&quot;, x = &quot;Provincia&quot;, y = &quot;Porcentaje&quot;) +
  coord_flip() +
  theme_minimal() +
  theme(plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
        plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
        title=element_text(size=10, face = &quot;bold&quot;)) +
  #scale_y_continuous(limits = c(0, 110), breaks = c(0, 20, 40, 60, 80 ,100))
  scale_y_continuous(limits = c(0, 105), breaks = c(0, 20, 40, 60, 80, 100))

b_inmuebles_apn_caba &lt;- b_inmuebles_apn %&gt;% 
  filter(provincia == &quot;Ciudad Autonoma de Buenos Aires&quot;)

capa_comunas &lt;- st_read(&#39;https://bitsandbricks.github.io/data/CABA_comunas.geojson&#39;)

# Hacemos al objeto uno de tipo espacial
capa_inmuebles_caba &lt;- b_inmuebles_apn_caba %&gt;% 
  filter(!is.na(longitud), !is.na(latitud), !is.na(departamento)) %&gt;% 
  st_as_sf(coords = c(&quot;longitud&quot;, &quot;latitud&quot;), crs = 4326) %&gt;% 
  mutate(lat = st_coordinates(.)[,1],
         lon = st_coordinates(.)[,2])

ggplot() +
  geom_sf(data = capa_comunas) +
  geom_sf(data = capa_inmuebles_caba, color = &quot;forestgreen&quot;, alpha = 0.4) +
  labs(title = &quot;Distribuci√≥n geogr√°fica de los inmuebles del Estado \n Nacional Argentino.&quot;,
       subtitle = &quot;Ciudad Aut√≥noma de Buenos Aires&quot;,
       caption= &quot;Fuente: https://datos.gob.ar/&quot;,
       fill = &quot;&quot;, x = &quot;Provincia&quot;, y = &quot;Cantidad&quot;) +
  theme_void() +
  theme(plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
                     plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
                     title=element_text(size=10, face = &quot;bold&quot;))

b_inmuebles_apn_caba &lt;- b_inmuebles_apn_caba %&gt;% 
  mutate(calle_numero = paste0(calle, &quot;_&quot;, numero)) %&gt;% 
  mutate(duplicados_dir   = ifelse(duplicated(calle_numero) == TRUE, 1, 2),
         duplicados_coord = ifelse(duplicated(longitud, latitud) == TRUE, 1 ,2))

b_inmuebles_apn_caba %&gt;% 
  filter(duplicados_dir == 1 | duplicados_coord == 1) %&gt;%  
  select(codigo_del_inmueble, calle_numero,  departamento, 
         superficie_aproximada_m2, longitud, latitud, duplicados_dir, duplicados_coord) %&gt;% 
  arrange(codigo_del_inmueble)

# Remuevo casos duplicados, quedandome con los unicos
b_inmuebles_apn_caba &lt;- b_inmuebles_apn_caba %&gt;% 
  distinct(calle_numero,  .keep_all = TRUE)

# Hacemos al objeto uno de tipo espacial y remuevo los duplicados por coordenadas
capa_inmuebles_caba &lt;- b_inmuebles_apn_caba %&gt;% 
  filter(!is.na(longitud), !is.na(latitud), !is.na(departamento)) %&gt;% 
  st_as_sf(coords = c(&quot;longitud&quot;, &quot;latitud&quot;), crs = 4326) %&gt;% 
  mutate(lat = st_coordinates(.)[,1],
         lon = st_coordinates(.)[,2]) %&gt;% 
  rename(superficie = superficie_aproximada_m2) %&gt;% 
  distinct(geometry,  .keep_all = TRUE)

ggplot() +
  geom_sf(data = capa_comunas) +
  geom_sf(data = capa_inmuebles_caba, color = &quot;forestgreen&quot;, alpha = 0.4, 
          aes(size = as.numeric(superficie))) +
  labs(title = &quot;Distribuci√≥n geogr√°fica de los inmuebles del Estado \n Nacional Argentino por superficie del inmueble.&quot;,
       subtitle = &quot;Ciudad Aut√≥noma de Buenos Aires&quot;,
       caption= &quot;Fuente: https://datos.gob.ar/&quot;,
       fill = &quot;&quot;, x = &quot;Provincia&quot;, y = &quot;Cantidad&quot;) +
  theme_void() +
  theme(plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
                     plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
                     title=element_text(size=10, face = &quot;bold&quot;), 
        legend.position = &quot;none&quot;)

# Frecuencia
calculate_tabulates(capa_inmuebles_caba, &quot;departamento&quot;) %&gt;% 
  arrange(-as.numeric(Freq)) %&gt;% 
  rename(Cantidad = Freq, Comuna = departamento)

#Vemos que hay edificios sin dato en departamento
#unique(capa_inmuebles_caba$departamento)

# Los quitamos de la base
capa_inmuebles_caba &lt;- capa_inmuebles_caba %&gt;% 
  filter(departamento != &quot;&quot;)

# Tabla
porc_comuna &lt;- capa_inmuebles_caba %&gt;% 
  calculate_tabulates(x = &quot;departamento&quot;, add.percentage = &quot;col&quot;)



# Gr√°fico
  ggplot(data = porc_comuna) + 
  geom_col(aes(x = reorder(departamento, as.numeric(Freq)), y = as.numeric(Freq),
               fill = ifelse(departamento == &quot;Comuna 1&quot;, &quot;A&quot;,&quot;B&quot;))) +
  geom_hline(yintercept = 0) +
  scale_fill_manual(values=c(A=&quot;#AF9699FF&quot;, B=&quot;#F3E8CCFF&quot;)) +
  geom_text(aes(x = reorder(departamento, as.numeric(Freq)), y = as.numeric(Freq), 
                label = paste0(Freq, &quot;%&quot;)),
            hjust = &quot;inward&quot;) +
  labs(title = &quot;Distribuci√≥n porcentual de los inmuebles del Estado Nacional \n por Comuna&quot;,
       x = &quot;Comuna&quot;, y = &quot;Porcentaje&quot;,
       caption = &quot;Fuente: Jefatura de Gabinete de Ministros. Agencia de Administraci√≥n de Bienes del Estado. Direcci√≥n Nacional del Registro de Bienes Inmuebles.&quot;,
       fill = &quot;&quot;) +
  coord_flip() +
  theme_minimal()+
  theme(plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
        plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
        title=element_text(size=10, face = &quot;bold&quot;), 
        legend.position = &quot;none&quot;)


  
inmuebles_x_comuna &lt;- capa_inmuebles_caba %&gt;%
  mutate(comunas = case_when(departamento == &quot;Comuna 1&quot; ~ 1, departamento == &quot;Comuna 2&quot; ~ 2, 
                             departamento == &quot;Comuna 3&quot; ~ 3, departamento == &quot;Comuna 4&quot; ~ 4, 
                             departamento == &quot;Comuna 5&quot; ~ 5, departamento == &quot;Comuna 6&quot; ~ 6,
                             departamento == &quot;Comuna 7&quot; ~ 7, departamento == &quot;Comuna 8&quot; ~ 8, 
                             departamento == &quot;Comuna 9&quot; ~ 9, departamento == &quot;Comuna 10&quot; ~ 10,
                             departamento == &quot;Comuna 11&quot; ~ 11, departamento == &quot;Comuna 12&quot; ~ 12,
                             departamento == &quot;Comuna 13&quot; ~ 13, departamento == &quot;Comuna 14&quot; ~ 14,
                             departamento == &quot;Comuna 15&quot; ~ 15)) %&gt;% 
  filter(!is.na(comunas)) %&gt;%
  group_by(comunas) %&gt;%
  summarise(cantidad=n()) %&gt;% 
  st_set_geometry(NULL)

capa_comunas &lt;- capa_comunas %&gt;%
  #mutate(comunas = as.numeric(levels(comunas))[comunas]) %&gt;%
  mutate(comunas = as.numeric(comunas)) %&gt;% 
  left_join(inmuebles_x_comuna, by = &quot;comunas&quot;)

ggplot() +
  geom_sf(data = capa_comunas, aes(fill=cantidad), color = NA) +
  geom_sf_text(data = capa_comunas, aes(label = comunas), size=2.5, colour = &quot;black&quot;) +
    labs(title = &quot;Inmuebles Propios del Estado Nacional y Alquilados&quot;,
         subtitle = &quot;Densidad de propiedades&quot;,
         fill = &quot;Cantidad&quot;,
         caption= &quot;Fuente: https://datos.gob.ar/&quot;) +
  theme_void() +
  scale_fill_distiller(palette = &quot;Spectral&quot;)


capa_radios &lt;- st_read(&quot;https://bitsandbricks.github.io/data/CABA_rc.geojson&quot;)

# Join de capa inmuebles y capa de radios + creo variable de cantidad
inmuebles_x_radio &lt;- st_join(capa_inmuebles_caba, capa_radios) %&gt;% 
  group_by(RADIO_ID) %&gt;%
  summarise(cantidad=n()) %&gt;% 
  st_set_geometry(NULL)

# Llevo variable de cantidad a la capa de radios
capa_radios &lt;- capa_radios %&gt;%
  left_join(inmuebles_x_radio, by = &quot;RADIO_ID&quot;)

# Visualizo distribuci√≥n de inmuebles por radio censal
ggplot() +
  geom_sf(data = capa_radios, aes(fill=cantidad), color = NA) +
  labs(title = &quot;Inmuebles Propios del Estado Nacional y Alquilados&quot;,
       subtitle = &quot;Propiedades publicadas&quot;,
       fill = &quot;Cantidad&quot;,
       caption= &quot;Fuente: xxx&quot;) +
  theme_void() +
  scale_fill_distiller(palette = &quot;Spectral&quot;)


ggplot() +
  geom_sf(data = capa_radios, aes(fill=cantidad)) +
  labs(title = &quot;Inmuebles Propios del Estado Nacional y Alquilados&quot;,
       subtitle = &quot;Propiedades publicadas&quot;,
       fill = &quot;Cantidad&quot;,
       caption= &quot;Fuente: xxx&quot;) +
  theme_void() +
  coord_sf(xlim = c(-58.39, -58.35), ylim = c(-34.63, -34.56), expand = FALSE)+
  scale_fill_distiller(palette = &quot;Spectral&quot;)


bbox &lt;- make_bbox(lon = b_inmuebles_apn_caba$longitud, lat = b_inmuebles_apn_caba$latitud)

bbox

CABA &lt;- get_stamenmap(bbox, zoom = 11, maptype = &quot;terrain&quot;)

# ggmap(CABA)

### Para replicar
theme_caba_map &lt;- theme (plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;), #ajustar los margenes del gr√°fico
                       title=element_text(size=10, face = &quot;bold&quot;), #tama√±o de titulo del mapa
                       legend.key.size = unit(0.3, &quot;cm&quot;), #alto de cuadrados de referencia
                       legend.key.width = unit(0.4,&quot;cm&quot;), #ancho de cuadrados de referencia 
                       legend.position=&quot;right&quot;, #ubicacion de leyenda
                       legend.direction = &quot;vertical&quot;, #direcci√≥n de la leyenda
                       legend.title=element_text(size=8, face = &quot;bold&quot;), #tama√±o de titulo de leyenda
                       legend.text=element_text(size=7), #tama√±o de texto de leyenda
                       plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6), #tama√±o de nota al pie
                       axis.text = element_blank(), #texto eje X e Y
                       axis.ticks = element_blank())

ggmap(CABA) +
  geom_point(data = b_inmuebles_apn_caba, aes(x = longitud, y = latitud),
  color = &quot;forestgreen&quot;, alpha = .5) +
  stat_density_2d(data = b_inmuebles_apn_caba, aes(x = longitud, y = latitud, 
                      fill = stat(level)),alpha = .4,
              bins = 25,
              geom = &quot;polygon&quot;) +
  labs(title=&quot;Distribuci√≥n de los inmuebles del Estado Nacional&quot;,
       subtitle=&quot;Ciudad Aut√≥noma de Buenos Aires&quot;,
       x=&quot;&quot;,
       y=&quot;&quot;,
       caption= &quot;Fuente: https://datos.gob.ar/&quot;,
       fill=&quot;Nivel&quot;)+
  scale_fill_distiller(palette = &quot;Spectral&quot;) +
  #scale_fill_gradientn(colors = RColorBrewer::brewer.pal(7, &quot;YlOrRd&quot;))
  #theme_caba_c
  theme_minimal() +
  theme(axis.text.x = element_blank(),
        axis.ticks.x.bottom = element_blank(),
        axis.text.y = element_blank(),
        axis.ticks.y.left = element_blank(),
        plot.margin = margin(0.25, 1, 0.25, 0.1, &quot;cm&quot;),
        plot.caption=element_text(face = &quot;italic&quot;, colour = &quot;gray35&quot;,size=6),
        legend.position = &quot;none&quot;,
        title=element_text(size=10, face = &quot;bold&quot;))</code></pre>
</div>
]]></content>
        </item>
        
    </channel>
</rss>
